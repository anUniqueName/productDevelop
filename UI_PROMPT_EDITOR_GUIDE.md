# 界面提示词编辑器使用指南

## 🎯 功能概述

现在你可以直接在界面上编辑和切换提示词配置，无需修改代码或重启服务器！

---

## 📍 位置

提示词编辑器位于右侧边栏的**顶部**，在"词库数据智能选款"部分之前。

---

## 🚀 快速使用

### 1. 打开编辑器

点击 **"提示词配置 (Prompt Configuration)"** 面板即可展开。

### 2. 快速切换预设

提供三种内置预设，点击即可切换：

| 预设 | 适用场景 | 特点 |
|------|---------|------|
| **珠宝** | 珠宝、首饰、配饰 | 强调材质、工艺、光泽度 |
| **通用** | 电子产品、家居用品 | 标准电商图片要求 |
| **服装** | 服装、鞋包、时尚配饰 | 强调面料、剪裁、风格 |

### 3. 自定义配置

#### 可编辑字段：

1. **产品类型名称**
   - 例如：珠宝设计、电子产品、家具设计

2. **分析角色描述 (Analysis Role)**
   - 定义 AI 如何分析上传的图片
   - 例如：`Analyze this jewelry design image...`

3. **生成角色描述 (Generation Role)**
   - 定义 AI 如何生成新图片
   - 例如：`Act as a world-class designer...`

#### 编辑步骤：

1. 点击任意预设作为起点（或直接编辑当前配置）
2. 修改文本框中的内容
3. 点击 **"保存自定义配置"** 按钮
4. 配置会自动保存到浏览器本地存储

### 4. 使用自定义配置

- 保存后，配置会**立即生效**
- 无需重启服务器
- 下次打开页面会自动加载你的自定义配置
- 面板会显示 **"⚡ 当前使用自定义配置"** 提示

---

## 💡 使用场景示例

### 场景 1：从珠宝切换到电子产品

1. 打开提示词编辑器
2. 点击 **"通用"** 预设
3. 修改 **产品类型名称** 为 "电子产品设计"
4. 点击 **"保存自定义配置"**
5. 立即开始上传电子产品图片进行分析和生成

### 场景 2：创建家具设计配置

1. 打开提示词编辑器
2. 点击 **"通用"** 预设作为基础
3. 修改 **产品类型名称** 为 "家具设计"
4. 修改 **分析角色描述**：
   ```
   Analyze this furniture design image. Focus on materials, 
   dimensions, style, and usage scenarios.
   ```
5. 修改 **生成角色描述**：
   ```
   Act as a world-class furniture designer. Create photorealistic 
   furniture renderings with attention to wood grain, metal finishes, 
   and fabric textures.
   ```
6. 点击 **"保存自定义配置"**

### 场景 3：恢复默认配置

如果想恢复到某个预设：
1. 点击对应的预设按钮（珠宝/通用/服装）
2. 点击 **"保存自定义配置"**

---

## 🔧 技术细节

### 配置存储

- 自定义配置保存在浏览器的 `localStorage` 中
- 键名：`customPromptConfig`
- 格式：JSON

### 配置生效机制

1. **实时生效**：修改后立即应用到下一次分析/生成
2. **持久化**：刷新页面后配置仍然保留
3. **全局共享**：配置管理器确保所有组件使用同一配置

### 配置结构

```typescript
{
  productType: "产品类型名称",
  analysisPrompt: {
    systemRole: "分析角色描述",
    fields: {
      designConcept: "设计理念字段说明",
      style: "风格字段说明",
      // ... 其他字段
    }
  },
  generationPrompt: {
    systemRole: "生成角色描述",
    outputRequirements: "输出要求",
    productSpecificGuidelines: "产品特定指导"
  }
}
```

---

## 📝 最佳实践

### 1. 从预设开始

不要从零开始编写提示词，选择一个最接近的预设作为基础。

### 2. 保持简洁明确

- 使用清晰的英文描述
- 避免过于复杂的句子
- 明确指出关键要求

### 3. 测试迭代

1. 修改配置
2. 保存
3. 上传测试图片
4. 查看分析和生成结果
5. 根据结果调整提示词

### 4. 备份重要配置

如果创建了满意的配置：
1. 打开浏览器开发者工具（F12）
2. 进入 Console（控制台）
3. 输入：`localStorage.getItem('customPromptConfig')`
4. 复制输出的 JSON 保存到文件

恢复配置：
```javascript
localStorage.setItem('customPromptConfig', '你的JSON配置')
```

---

## ⚠️ 注意事项

1. **浏览器限制**
   - 配置保存在当前浏览器中
   - 清除浏览器数据会丢失配置
   - 不同浏览器不共享配置

2. **提示词语言**
   - 系统角色描述建议使用英文
   - 分析结果会自动返回中文
   - 不要在提示词中使用特殊字符

3. **立即生效**
   - 修改后无需重启服务器
   - 但需要点击"保存"按钮才会持久化
   - 未保存的修改在刷新页面后会丢失

---

## 🆚 对比：界面编辑 vs 代码编辑

| 特性 | 界面编辑 | 代码编辑 |
|------|---------|---------|
| 易用性 | ⭐⭐⭐⭐⭐ 无需编程知识 | ⭐⭐ 需要了解代码 |
| 实时预览 | ✅ 立即生效 | ❌ 需要重启 |
| 持久化 | ✅ 自动保存到本地 | ✅ 保存到代码文件 |
| 灵活性 | ⭐⭐⭐ 基础字段 | ⭐⭐⭐⭐⭐ 完全自定义 |
| 适用场景 | 快速切换、日常使用 | 高级定制、团队共享 |

---

## 🎓 进阶：完全自定义

如果界面编辑器不够用，你仍然可以：

1. 编辑 `config/prompts.config.ts` 添加新预设
2. 修改 `analysisPrompt.fields` 定义新的分析字段
3. 自定义 `outputRequirements` 和 `productSpecificGuidelines`

详细说明请参考：`PROMPT_CUSTOMIZATION_GUIDE.md`

---

## 🐛 故障排除

### 问题 1：配置没有生效

**解决方案**：
1. 确认点击了"保存自定义配置"按钮
2. 刷新页面
3. 检查浏览器控制台是否有错误

### 问题 2：配置丢失

**解决方案**：
1. 检查是否清除了浏览器数据
2. 从备份恢复配置（如果有）
3. 重新创建配置

### 问题 3：生成结果不理想

**解决方案**：
1. 检查提示词是否清晰明确
2. 参考内置预设的写法
3. 尝试不同的描述方式
4. 查看控制台日志了解 AI 的实际输入

---

需要帮助？查看 `PROMPT_CUSTOMIZATION_GUIDE.md` 了解更多高级用法！

